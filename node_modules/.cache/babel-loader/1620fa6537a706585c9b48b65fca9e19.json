{"ast":null,"code":"import { invariant } from 'hey-listen';\nimport * as React from 'react';\nimport { forwardRef, useContext, useRef, useEffect } from 'react';\nimport { ReorderContext } from '../../context/ReorderContext.mjs';\nimport { motion } from '../../render/dom/motion.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { useMotionValue } from '../../value/use-motion-value.mjs';\nimport { useTransform } from '../../value/use-transform.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction useDefaultMotionValue(value, defaultValue = 0) {\n  return isMotionValue(value) ? value : useMotionValue(defaultValue);\n}\n\nfunction ReorderItem({\n  children,\n  style = {},\n  value,\n  as = \"li\",\n  onDrag,\n  layout = true,\n  ...props\n}, externalRef) {\n  const Component = useConstant(() => motion(as));\n  const context = useContext(ReorderContext);\n  const point = {\n    x: useDefaultMotionValue(style.x),\n    y: useDefaultMotionValue(style.y)\n  };\n  const zIndex = useTransform([point.x, point.y], ([latestX, latestY]) => latestX || latestY ? 1 : \"unset\");\n  const measuredLayout = useRef(null);\n  invariant(Boolean(context), \"Reorder.Item must be a child of Reorder.Group\");\n  const axis = context.axis,\n        registerItem = context.registerItem,\n        updateOrder = context.updateOrder;\n  useEffect(() => {\n    registerItem(value, measuredLayout.current);\n  }, [context]);\n  return React.createElement(Component, {\n    drag: axis,\n    ...props,\n    dragSnapToOrigin: true,\n    style: { ...style,\n      x: point.x,\n      y: point.y,\n      zIndex\n    },\n    layout: layout,\n    onDrag: (event, gesturePoint) => {\n      const velocity = gesturePoint.velocity;\n      velocity[axis] && updateOrder(value, point[axis].get(), velocity[axis]);\n      onDrag && onDrag(event, gesturePoint);\n    },\n    onLayoutMeasure: measured => {\n      measuredLayout.current = measured;\n    },\n    ref: externalRef\n  }, children);\n}\n\nconst Item = forwardRef(ReorderItem);\nexport { Item, ReorderItem };","map":null,"metadata":{},"sourceType":"module"}